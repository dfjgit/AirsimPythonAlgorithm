# 无人机路径飞行和比较系统

这个系统提供了使用AirSim单无人机按路径飞行并进行路径比较的功能。

## 文件说明

- `flywithPath.py` - 主要的无人机路径飞行和比较脚本
- `path_analysis.py` - 路径分析脚本（不需要连接AirSim）
- `path1.json` - 第一个路径文件
- `path2.json` - 第二个路径文件

## 功能特性

### 1. 路径飞行功能
- 连接AirSim模拟器
- 自动起飞和降落
- 按指定路径飞行
- 记录实际飞行轨迹
- 错误处理和日志记录

### 2. 路径比较功能
- 路径长度计算
- 高度变化分析
- 飞行时间统计
- 平均速度计算
- 路径效率评估
- 差异分析

### 3. 数据分析
- 详细的统计报告
- JSON格式数据导出
- 控制台输出分析结果

## 使用方法

### 方法1：完整飞行测试（需要AirSim）

```bash
python flywithPath.py
```

这个脚本会：
1. 连接AirSim模拟器
2. 按路径1飞行
3. 按路径2飞行
4. 生成比较报告
5. 保存数据到JSON文件

### 方法2：仅路径分析（不需要AirSim）

```bash
python path_analysis.py
```

这个脚本会：
1. 加载两个路径文件
2. 分析路径特征
3. 生成详细报告
4. 提供优化建议

## 路径文件格式

路径文件应该是JSON格式，包含以下结构：

```json
{
    "1": [
        {
            "x": -0.8575637340545654,
            "y": -1.893777847290039,
            "z": 0.48366206884384155,
            "time": 0.2
        },
        ...
    ]
}
```

每个路径点包含：
- `x`, `y`, `z`: 三维坐标
- `time`: 时间戳（可选）

## 分析结果示例

根据当前的两个路径文件分析：

### 路径1特点：
- 39个路径点
- 总距离：2.09米
- 路径效率：96.6%
- 高度范围：0.01米
- 平均速度：0.28 m/s

### 路径2特点：
- 36个路径点
- 总距离：4.15米
- 路径效率：96.3%
- 高度范围：0.01米
- 平均速度：0.59 m/s

### 主要差异：
- 路径1更短更直接
- 路径2速度更快
- 两个路径的高度变化都很小
- 路径1效率略高

## 建议

1. **路径1更适合**：如果需要最短路径和最高效率
2. **路径2更适合**：如果需要更快的飞行速度
3. **两个路径都很稳定**：高度变化都很小，适合稳定飞行

## 依赖要求

- Python 3.6+
- AirSim Python API
- 标准库：json, time, math, logging, typing, pathlib, sys, os

## 注意事项

1. 确保AirSim模拟器正在运行
2. 检查无人机名称设置（默认为"UAV1"）
3. 确保路径文件格式正确
4. 飞行前检查环境安全

## 输出文件

- `path_flight.log` - 飞行日志
- `path_comparison_data.json` - 比较数据
- `path_analysis.log` - 分析日志（如果使用分析脚本）
