# ðŸš DQNæ— äººæœºç§»åŠ¨æŽ§åˆ¶ - å¿«é€ŸæŒ‡å—

## ðŸ“– è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨**æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆDQNï¼‰**è®­ç»ƒæ— äººæœºè‡ªä¸»ç§»åŠ¨å’ŒåŒºåŸŸæ‰«æçš„ç³»ç»Ÿã€‚æ— äººæœºé€šè¿‡å­¦ä¹ åœ¨6ä¸ªæ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³å‰åŽï¼‰ç§»åŠ¨ï¼Œæ¥å®Œæˆæ‰«æä»»åŠ¡ã€‚

## ðŸŽ¯ æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜Ž |
|-----|------|
| **åŠ¨ä½œç©ºé—´** | 6ä¸ªç¦»æ•£åŠ¨ä½œï¼ˆä¸Š/ä¸‹/å·¦/å³/å‰/åŽï¼‰ |
| **è§‚å¯Ÿç©ºé—´** | 21ç»´çŠ¶æ€ï¼ˆä½ç½®ã€é€Ÿåº¦ã€ç†µå€¼ã€Leaderä¿¡æ¯ç­‰ï¼‰ |
| **è®­ç»ƒæ¨¡å¼** | æ”¯æŒçº¯æ¨¡æ‹Ÿè®­ç»ƒ & AirSimé›†æˆè®­ç»ƒ |
| **çµæ´»é…ç½®** | JSONé…ç½®æ–‡ä»¶ï¼Œå¯è‡ªå®šä¹‰å¥–åŠ±å’Œå‚æ•° |

## ðŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### Step 1: å®‰è£…ä¾èµ–

```bash
pip install torch stable-baselines3 numpy gymnasium
```

> **æ³¨æ„**: ä½¿ç”¨ `gymnasium` è€Œä¸æ˜¯æ—§ç‰ˆçš„ `gym`

### Step 2: å¼€å§‹è®­ç»ƒï¼ˆçº¯æ¨¡æ‹Ÿï¼‰

**Windows**:
```bash
train_movement_dqn.bat
```

**Linux/Mac**:
```bash
python multirotor/DQN_Movement/train_movement_dqn.py
```

### Step 3: æµ‹è¯•æ¨¡åž‹

è®­ç»ƒå®ŒæˆåŽï¼ˆ10ä¸‡æ­¥ï¼Œçº¦10-30åˆ†é’Ÿï¼‰ï¼š

```bash
# Windows
test_movement_dqn.bat

# Linux/Mac
python multirotor/DQN_Movement/test_movement_dqn.py
```

## ðŸ“‚ æ–‡ä»¶è¯´æ˜Ž

```
DQN_Movement/
â”œâ”€â”€ ðŸ“„ movement_env.py              # çŽ¯å¢ƒå®šä¹‰ï¼ˆæ ¸å¿ƒï¼‰
â”œâ”€â”€ âš™ï¸ movement_dqn_config.json    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ðŸŽ“ train_movement_dqn.py       # çº¯æ¨¡æ‹Ÿè®­ç»ƒ
â”œâ”€â”€ ðŸŽ® train_movement_with_airsim.py # AirSimè®­ç»ƒ
â”œâ”€â”€ ðŸ§ª test_movement_dqn.py        # æ¨¡åž‹æµ‹è¯•
â”œâ”€â”€ ðŸ“š MOVEMENT_DQN.md             # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ ðŸ“ README_MOVEMENT.md          # å¿«é€ŸæŒ‡å—ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â””â”€â”€ ðŸ“ models/                     # è®­ç»ƒæ¨¡åž‹ä¿å­˜ç›®å½•
```

## ðŸŽ® ä¸¤ç§è®­ç»ƒæ¨¡å¼

### æ¨¡å¼1: çº¯æ¨¡æ‹Ÿè®­ç»ƒï¼ˆæŽ¨èæ–°æ‰‹ï¼‰

**ç‰¹ç‚¹**:
- âš¡ å¿«é€Ÿå¯åŠ¨
- ðŸ’» æ— éœ€Unity
- ðŸ”„ é€‚åˆè°ƒè¯•

**ä½¿ç”¨**:
```bash
train_movement_dqn.bat
```

### æ¨¡å¼2: AirSimé›†æˆï¼ˆçœŸå®žçŽ¯å¢ƒï¼‰

**ç‰¹ç‚¹**:
- ðŸŽ¯ çœŸå®žåé¦ˆ
- ðŸŽ® éœ€è¦Unity
- ðŸ“ˆ æ›´å‡†ç¡®

**ä½¿ç”¨**:
```bash
# 1. å¯åŠ¨Unityå®¢æˆ·ç«¯
# 2. è¿è¡Œè®­ç»ƒ
train_movement_with_airsim.bat
```

## âš™ï¸ é…ç½®è°ƒæ•´

ç¼–è¾‘ `movement_dqn_config.json`:

```json
{
  "movement": {
    "step_size": 1.0,      // ç§»åŠ¨æ­¥é•¿ï¼ˆç±³ï¼‰
    "max_steps": 500       // æœ€å¤§æ­¥æ•°
  },
  "rewards": {
    "exploration": 10.0,   // æŽ¢ç´¢å¥–åŠ±
    "collision": -50.0     // ç¢°æ’žæƒ©ç½š
  },
  "training": {
    "total_timesteps": 100000,  // è®­ç»ƒæ­¥æ•°
    "learning_rate": 0.0001     // å­¦ä¹ çŽ‡
  }
}
```

## ðŸ“Š ç›‘æŽ§è®­ç»ƒ

ä½¿ç”¨TensorboardæŸ¥çœ‹è®­ç»ƒæ›²çº¿ï¼š

```bash
tensorboard --logdir=multirotor/DQN_Movement/logs/movement_dqn/
```

ç„¶åŽè®¿é—® `http://localhost:6006`

## ðŸŽ¯ æœŸæœ›ç»“æžœ

è®­ç»ƒæˆåŠŸçš„æŒ‡æ ‡ï¼š
- âœ… **å¹³å‡å¥–åŠ±** > 100
- âœ… **æ‰«æå®ŒæˆçŽ‡** > 90%
- âœ… **ç¢°æ’žæ¬¡æ•°** < 5æ¬¡/episode

## ðŸ”§ å¸¸è§é—®é¢˜

### Q: è®­ç»ƒå¾ˆæ…¢ï¼Ÿ
**A**: ä½¿ç”¨GPUç‰ˆæœ¬PyTorchæˆ–å‡å°‘ `total_timesteps`

### Q: æ¨¡åž‹æ•ˆæžœä¸å¥½ï¼Ÿ
**A**: 
1. å¢žåŠ è®­ç»ƒæ—¶é—´
2. è°ƒæ•´å¥–åŠ±æƒé‡
3. æ£€æŸ¥æŽ¢ç´¢çŽ‡è®¾ç½®

### Q: æ‰¾ä¸åˆ°æ¨¡åž‹æ–‡ä»¶ï¼Ÿ
**A**: æ¨¡åž‹ä¿å­˜åœ¨ `multirotor/DQN_Movement/models/` ç›®å½•

## ðŸ“š æ›´å¤šä¿¡æ¯

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹: [MOVEMENT_DQN.md](./MOVEMENT_DQN.md)

## ðŸŽ“ å·¥ä½œåŽŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   çŽ¯å¢ƒçŠ¶æ€   â”‚ (21ç»´è§‚å¯Ÿ)
â”‚  ä½ç½®/é€Ÿåº¦   â”‚
â”‚  ç†µå€¼/Leader â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DQNç½‘ç»œ    â”‚ (ç¥žç»ç½‘ç»œ)
â”‚   Qå€¼è®¡ç®—   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é€‰æ‹©åŠ¨ä½œ   â”‚ (0-5: 6æ–¹å‘)
â”‚  ä¸Šä¸‹å·¦å³å‰åŽ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œç§»åŠ¨   â”‚
â”‚  èŽ·å¾—å¥–åŠ±   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“ˆ è®­ç»ƒæµç¨‹

1. **åˆå§‹åŒ–**: éšæœºæŽ¢ç´¢çŽ¯å¢ƒ
2. **æ”¶é›†ç»éªŒ**: ä¿å­˜åˆ°ç»éªŒå›žæ”¾ç¼“å†²åŒº
3. **å­¦ä¹ æ›´æ–°**: ä»Žç¼“å†²åŒºé‡‡æ ·è®­ç»ƒ
4. **æŽ¢ç´¢è¡°å‡**: é€æ¸å‡å°‘éšæœºæŽ¢ç´¢
5. **ç­–ç•¥ä¼˜åŒ–**: å­¦ä¹ æœ€ä¼˜ç§»åŠ¨ç­–ç•¥

## ðŸŒŸ ä¸‹ä¸€æ­¥

1. âœ… å®ŒæˆåŸºç¡€è®­ç»ƒ
2. ðŸŽ¯ è°ƒä¼˜å‚æ•°èŽ·å¾—æ›´å¥½æ€§èƒ½
3. ðŸŽ® é›†æˆåˆ°AirSimçŽ¯å¢ƒ
4. ðŸš€ éƒ¨ç½²åˆ°å®žé™…æ— äººæœºä»»åŠ¡

---

**ðŸ’¡ æç¤º**: ç¬¬ä¸€æ¬¡è®­ç»ƒå»ºè®®ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œè§‚å¯Ÿæ•ˆæžœåŽå†è°ƒæ•´ã€‚

**ðŸ¤ æ”¯æŒ**: é‡åˆ°é—®é¢˜è¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æIssueã€‚

