# æ— äººæœºé…ç½®å¿«é€Ÿå‚è€ƒ

> **å¿«é€Ÿå‚è€ƒæŒ‡å—** - ç”¨äºæ—¥å¸¸å¼€å‘å’Œè°ƒè¯•çš„ç®€æ˜é…ç½®è¯´æ˜

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

| é…ç½®ç±»å‹ | æ–‡ä»¶è·¯å¾„ | ç”¨é€” |
|---------|---------|------|
| **æ— äººæœºé…ç½®** | `multirotor/drones_config.json` | æ— äººæœºç¡¬ä»¶é…ç½®ã€è®­ç»ƒé€‰æ‹© |
| **DQN ç®—æ³•** | `multirotor/DQN_Movement/movement_dqn_config.json` | DQN è®­ç»ƒå‚æ•° |
| **DDPG ç®—æ³•** | `multirotor/DDPG_Weight/*.json` | DDPG è®­ç»ƒå‚æ•° |
| **APF ç®—æ³•** | `multirotor/scanner_config.json` | APF ç®—æ³•ç³»æ•° |

---

## ğŸ”§ å¸¸è§æ“ä½œ

### 1. æ·»åŠ æ–°æ— äººæœº

ç¼–è¾‘ `drones_config.json`:
```json
{
  "drones": {
    "UAV4": {
      "enabled": true,
      "type": "virtual",
      "isCrazyflieMirror": false,
      "description": "è™šæ‹Ÿæ— äººæœº4ï¼ˆAirSimï¼‰"
    }
  }
}
```

**å­—æ®µè¯´æ˜**:
- `enabled`: `true` = å¯ç”¨ï¼Œ`false` = ç¦ç”¨
- `type`: `"virtual"` = è™šæ‹Ÿæ— äººæœº(AirSim)ï¼Œ`"physical"` = å®ä½“æ— äººæœº(Crazyflie)
- `isCrazyflieMirror`: æ˜¯å¦ä¸º Crazyflie é•œåƒï¼ˆè™šå®ååŒï¼‰
- `description`: æ— äººæœºæè¿°ï¼ˆå¯é€‰ï¼‰

---

### 2. é…ç½®å®ä½“æ— äººæœºï¼ˆCrazyflieï¼‰

```json
{
  "drones": {
    "CF1": {
      "enabled": true,
      "type": "physical",
      "isCrazyflieMirror": true,
      "description": "å®ä½“æ— äººæœº1ï¼ˆCrazyflieï¼‰"
    }
  }
}
```

âš ï¸ **æ³¨æ„**: `type` å’Œ `isCrazyflieMirror` å¿…é¡»åŒ¹é…ï¼š
- å®ä½“æ— äººæœº: `type: "physical"` + `isCrazyflieMirror: true`
- è™šæ‹Ÿæ— äººæœº: `type: "virtual"` + `isCrazyflieMirror: false`

---

### 3. ç¦ç”¨/å¯ç”¨æ— äººæœº

```json
{
  "drones": {
    "UAV2": {
      "enabled": false,  // è®¾ä¸º false ç¦ç”¨
      ...
    }
  }
}
```

ğŸ’¡ **æç¤º**: ç¦ç”¨çš„æ— äººæœºä¸ä¼šå‡ºç°åœ¨è®­ç»ƒåˆ—è¡¨ä¸­ã€‚

---

### 4. é…ç½® DQN è®­ç»ƒä½¿ç”¨çš„æ— äººæœº

#### æ–¹å¼ A: ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„æ— äººæœº
```json
{
  "training": {
    "dqn": {
      "use_all_drones": true
    }
  }
}
```

#### æ–¹å¼ B: æŒ‡å®šç‰¹å®šæ— äººæœº
```json
{
  "training": {
    "dqn": {
      "use_all_drones": false,
      "drone_list": ["UAV1", "UAV3"]
    }
  }
}
```

âš ï¸ **DQN é™åˆ¶**: å½“å‰ DQN ä»…æ”¯æŒå•æ— äººæœºè®­ç»ƒï¼Œä¼šä½¿ç”¨åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªã€‚

---

### 5. é…ç½® DDPG è®­ç»ƒä½¿ç”¨çš„æ— äººæœº

```json
{
  "training": {
    "ddpg": {
      "use_all_drones": true
      // æˆ–
      // "use_all_drones": false,
      // "drone_list": ["UAV1", "UAV2", "UAV3"]
    }
  }
}
```

âœ… **DDPG æ”¯æŒ**: DDPG æ”¯æŒå¤šæ— äººæœºååŒè®­ç»ƒã€‚

---

## ğŸ’» ä»£ç ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```python
from Algorithm.drones_config import DronesConfig

# 1. åŠ è½½é…ç½®
config = DronesConfig()

# 2. è·å–æ‰€æœ‰æ— äººæœº
all_drones = config.get_all_drones()
# è¾“å‡º: ['UAV1', 'UAV2', 'UAV3']

# 3. è·å–å¯ç”¨çš„æ— äººæœº
enabled = config.get_enabled_drones()
# è¾“å‡º: ['UAV1', 'UAV3'] (å‡è®¾UAV2è¢«ç¦ç”¨)

# 4. è·å– DQN è®­ç»ƒæ— äººæœº
dqn_drones = config.get_training_drones('dqn')
# è¾“å‡º: ['UAV1']

# 5. è·å– DDPG è®­ç»ƒæ— äººæœº
ddpg_drones = config.get_training_drones('ddpg')
# è¾“å‡º: ['UAV1', 'UAV2', 'UAV3']
```

---

### æ£€æŸ¥æ— äººæœºä¿¡æ¯

```python
# æ£€æŸ¥æ— äººæœºç±»å‹
drone_type = config.get_drone_type('UAV1')
# è¿”å›: 'virtual' æˆ– 'physical'

# åˆ¤æ–­æ˜¯å¦ä¸ºå®ä½“æ— äººæœº
is_physical = config.is_crazyflie_mirror('UAV1')
# è¿”å›: True æˆ– False

# åˆ¤æ–­æ˜¯å¦å¯ç”¨
is_enabled = config.is_enabled('UAV1')
# è¿”å›: True æˆ– False

# è·å–å®Œæ•´ä¿¡æ¯
drone_info = config.get_drone_info('UAV1')
# è¿”å›: {'enabled': True, 'type': 'virtual', ...}
```

---

### åœ¨è®­ç»ƒè„šæœ¬ä¸­ä½¿ç”¨

```python
import sys
from Algorithm.drones_config import DronesConfig

# åŠ è½½é…ç½®
drones_config = DronesConfig()

# è·å–è®­ç»ƒæ— äººæœº
drone_names = drones_config.get_training_drones('dqn')

# éªŒè¯
if not drone_names:
    print("âŒ é”™è¯¯: æ²¡æœ‰å¯ç”¨çš„è®­ç»ƒæ— äººæœº")
    sys.exit(1)

# æ˜¾ç¤ºä¿¡æ¯
print(f"âœ… è®­ç»ƒæ— äººæœº: {drone_names}")
for drone in drone_names:
    drone_type = "å®ä½“" if drones_config.is_crazyflie_mirror(drone) else "è™šæ‹Ÿ"
    print(f"   - {drone}: {drone_type}æ— äººæœº")

# ä½¿ç”¨ç¬¬ä¸€ä¸ªæ— äººæœºï¼ˆDQNå•æ™ºèƒ½ä½“ï¼‰
training_drone = drone_names[0]
```

---

## ğŸ“‹ API å¿«é€Ÿå‚è€ƒ

### è·å–æ— äººæœºåˆ—è¡¨
| æ–¹æ³• | è¿”å›å€¼ | è¯´æ˜ |
|------|--------|------|
| `get_all_drones()` | `List[str]` | æ‰€æœ‰æ— äººæœºåç§° |
| `get_enabled_drones()` | `List[str]` | å¯ç”¨çš„æ— äººæœºåç§° |
| `get_training_drones('dqn'\|'ddpg')` | `List[str]` | è®­ç»ƒä½¿ç”¨çš„æ— äººæœº |

### è·å–æ— äººæœºä¿¡æ¯
| æ–¹æ³• | è¿”å›å€¼ | è¯´æ˜ |
|------|--------|------|
| `get_drone_info(name)` | `Dict` | æ— äººæœºè¯¦ç»†ä¿¡æ¯ |
| `get_drone_type(name)` | `str` | `'virtual'` æˆ– `'physical'` |
| `is_crazyflie_mirror(name)` | `bool` | æ˜¯å¦ä¸ºå®ä½“æ— äººæœº |
| `is_enabled(name)` | `bool` | æ˜¯å¦å¯ç”¨ |

### ä¿å­˜é…ç½®
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `save_config()` | ä¿å­˜ä¿®æ”¹åçš„é…ç½® |

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¿®æ”¹é…ç½®åä¸ç”Ÿæ•ˆï¼Ÿ
**A**: é‡å¯è®­ç»ƒè„šæœ¬ï¼Œç¡®ä¿é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ã€‚

### Q2: æç¤º"æ²¡æœ‰å¯ç”¨çš„è®­ç»ƒæ— äººæœº"ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ— äººæœºæ˜¯å¦å·²å¯ç”¨ (`enabled: true`)
2. `drone_list` ä¸­çš„åç§°æ˜¯å¦æ­£ç¡®
3. æ— äººæœºåç§°æ‹¼å†™æ˜¯å¦ä¸€è‡´

### Q3: DQN å¦‚ä½•ä½¿ç”¨å¤šä¸ªæ— äººæœºï¼Ÿ
**A**: ç°åœ¨ DQN å·²æ”¯æŒå¤šæœºè®­ç»ƒï¼åªéœ€åœ¨ `drones_config.json` ä¸­é…ç½®å¤šä¸ªæ— äººæœºï¼š
```json
{
  "training": {
    "dqn": {
      "use_all_drones": true  // æˆ–æŒ‡å®šå¤šä¸ªæ— äººæœº
    }
  }
}
```
å¤šæœºæ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰æ— äººæœºå…±äº«åŒä¸€ä¸ª DQN æ¨¡å‹ï¼Œè½®æµæ‰§è¡ŒåŠ¨ä½œã€‚

### Q4: DDPG å¯ä»¥æ··åˆè™šæ‹Ÿå’Œå®ä½“æ— äººæœºå—ï¼Ÿ
**A**: å¯ä»¥ï¼é…ç½®å¥½ `isCrazyflieMirror` å­—æ®µå³å¯å®ç°è™šå®æ··åˆã€‚

### Q5: å¦‚ä½•ä¸´æ—¶ç¦ç”¨æŸä¸ªæ— äººæœºï¼Ÿ
**A**: å°†è¯¥æ— äººæœºçš„ `enabled` è®¾ä¸º `false`ï¼Œæ— éœ€åˆ é™¤é…ç½®ã€‚

---

## ğŸ¯ é…ç½®æ¨¡æ¿

### çº¯è™šæ‹Ÿæ— äººæœºç¯å¢ƒ
```json
{
  "drones": {
    "UAV1": {"enabled": true, "type": "virtual", "isCrazyflieMirror": false},
    "UAV2": {"enabled": true, "type": "virtual", "isCrazyflieMirror": false},
    "UAV3": {"enabled": true, "type": "virtual", "isCrazyflieMirror": false}
  },
  "training": {
    "dqn": {"use_all_drones": false, "drone_list": ["UAV1"]},
    "ddpg": {"use_all_drones": true}
  }
}
```

---

### è™šå®æ··åˆç¯å¢ƒ
```json
{
  "drones": {
    "UAV1": {"enabled": true, "type": "virtual", "isCrazyflieMirror": false},
    "CF1": {"enabled": true, "type": "physical", "isCrazyflieMirror": true},
    "CF2": {"enabled": true, "type": "physical", "isCrazyflieMirror": true}
  },
  "training": {
    "dqn": {"use_all_drones": false, "drone_list": ["UAV1"]},
    "ddpg": {"use_all_drones": true}
  }
}
```

---

### å•æ— äººæœºå¼€å‘ç¯å¢ƒ
```json
{
  "drones": {
    "UAV1": {"enabled": true, "type": "virtual", "isCrazyflieMirror": false}
  },
  "training": {
    "dqn": {"use_all_drones": true},
    "ddpg": {"use_all_drones": true}
  }
}
```

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### æ­¥éª¤ 1: æ£€æŸ¥å½“å‰é…ç½®
```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat multirotor/drones_config.json

# æˆ–åœ¨ Python ä¸­
python -c "from Algorithm.drones_config import DronesConfig; print(DronesConfig())"
```

### æ­¥éª¤ 2: ä¿®æ”¹é…ç½®
ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ `multirotor/drones_config.json`ï¼ŒæŒ‰éœ€ä¿®æ”¹ã€‚

### æ­¥éª¤ 3: éªŒè¯é…ç½®
```python
from Algorithm.drones_config import DronesConfig

config = DronesConfig()
print("æ‰€æœ‰æ— äººæœº:", config.get_all_drones())
print("DQNè®­ç»ƒ:", config.get_training_drones('dqn'))
print("DDPGè®­ç»ƒ:", config.get_training_drones('ddpg'))
```

### æ­¥éª¤ 4: å¼€å§‹è®­ç»ƒ
è¿è¡Œç›¸åº”çš„è®­ç»ƒè„šæœ¬ï¼Œé…ç½®ä¼šè‡ªåŠ¨åŠ è½½ã€‚

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†æ¶æ„è¯´æ˜**: å‚è§ `é…ç½®æ–‡ä»¶æ¶æ„è¯´æ˜.md`
- **é…ç½®ç±»æºç **: `multirotor/Algorithm/drones_config.py`
- **è®­ç»ƒè„šæœ¬ç¤ºä¾‹**: `multirotor/DQN_Movement/train_movement_with_airsim.py`

---

## ğŸ’¡ æç¤ºä¸æŠ€å·§

### 1. ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶
å»ºè®®å°† `drones_config.json` åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œå’Œé…ç½®å›æº¯ã€‚

### 2. å¤‡ä»½é…ç½®
ä¿®æ”¹é…ç½®å‰ï¼Œå…ˆå¤‡ä»½ä¸€ä»½ï¼š
```bash
cp drones_config.json drones_config.json.bak
```

### 3. JSON æ ¼å¼éªŒè¯
ä½¿ç”¨åœ¨çº¿å·¥å…·éªŒè¯ JSON æ ¼å¼ï¼šhttps://jsonlint.com/

### 4. é…ç½®æ³¨é‡Š
è™½ç„¶æ ‡å‡† JSON ä¸æ”¯æŒæ³¨é‡Šï¼Œä½†å¯ä»¥ä½¿ç”¨ `description` å­—æ®µï¼š
```json
{
  "drones": {
    "UAV1": {
      "description": "å¼€å‘æµ‹è¯•ç”¨è™šæ‹Ÿæ— äººæœº",
      ...
    }
  }
}
```

### 5. ç¯å¢ƒéš”ç¦»
ä¸ºä¸åŒç¯å¢ƒï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰ç»´æŠ¤ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼š
- `drones_config_dev.json`
- `drones_config_test.json`
- `drones_config_prod.json`

---

## âœ… æœ€ä½³å®è·µ

1. âœ… æ‰€æœ‰æ— äººæœºé…ç½®é›†ä¸­åœ¨ `drones_config.json` ä¸­ç®¡ç†
2. âœ… ä½¿ç”¨ `DronesConfig` ç±»è€Œä¸æ˜¯ç›´æ¥è¯»å– JSON
3. âœ… è®­ç»ƒå‰éªŒè¯æ— äººæœºåˆ—è¡¨éç©º
4. âœ… ä¸ºæ¯ä¸ªæ— äººæœºæ·»åŠ æè¿°æ€§ `description`
5. âœ… å®šæœŸæ£€æŸ¥ç¦ç”¨çš„æ— äººæœºï¼Œæ¸…ç†è¿‡æœŸé…ç½®

---

## ğŸ”„ æ¶æ„ä¼˜åŠ¿æ€»ç»“

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ’ **é¿å…å†—ä½™** | æ— äººæœºé…ç½®åªéœ€åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰ |
| ğŸš€ **æ˜“äºæ‰©å±•** | æ·»åŠ æ–°æ— äººæœºåªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ |
| ğŸ¯ **èŒè´£æ¸…æ™°** | ç®—æ³•é…ç½®å’Œæ— äººæœºé…ç½®åˆ†ç¦» |
| ğŸ”€ **çµæ´»åˆ‡æ¢** | è½»æ¾åˆ‡æ¢è®­ç»ƒä½¿ç”¨çš„æ— äººæœº |
| ğŸ”— **ç»Ÿä¸€ç®¡ç†** | DQN å’Œ DDPG å…±äº«åŒä¸€é…ç½®æº |

---

**æœ€åæ›´æ–°**: 2025-01-26  
**ç‰ˆæœ¬**: v1.0.0
