# DQNæ¨¡å‹ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•è®­ç»ƒå’Œä½¿ç”¨DQNæƒé‡é¢„æµ‹æ¨¡å‹ã€‚

---

## ğŸ¯ è®­ç»ƒæ¨¡å‹

### 1. å¯åŠ¨è®­ç»ƒ

```bash
cd AirsimAlgorithmPython/multirotor/DQN_Weight
python train_with_airsim_improved.py
```

### 2. è®­ç»ƒè¾“å‡ºçš„æ¨¡å‹æ–‡ä»¶

è®­ç»ƒå®Œæˆåï¼Œä¼šåœ¨ `models/` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

| æ–‡ä»¶å | è¯´æ˜ | æ¨èä½¿ç”¨åœºæ™¯ |
|--------|------|-------------|
| `best_model.zip` | è®­ç»ƒè¿‡ç¨‹ä¸­è¡¨ç°æœ€å¥½çš„æ¨¡å‹ | â­ **é¦–é€‰**ï¼Œæ€§èƒ½æœ€ä¼˜ |
| `weight_predictor_airsim.zip` | è®­ç»ƒç»“æŸæ—¶çš„æœ€ç»ˆæ¨¡å‹ | ç”¨äºå¯¹æ¯”æˆ–ç»§ç»­è®­ç»ƒ |
| `checkpoint_*.zip` | æ¯Næ­¥ä¿å­˜çš„æ£€æŸ¥ç‚¹ | ç”¨äºåˆ†æè®­ç»ƒè¿‡ç¨‹æˆ–æ¢å¤è®­ç»ƒ |

---

## ğŸš€ ä½¿ç”¨æ¨¡å‹

### æ–¹æ³•1ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ¨¡å‹ï¼ˆæ¨èï¼‰

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©æ¨¡å‹ï¼š
1. `best_model.zip`
2. `weight_predictor_airsim.zip`
3. `weight_predictor_simple.zip`

```bash
cd AirsimAlgorithmPython/multirotor
python AlgorithmServer.py --use-learned-weights
```

### æ–¹æ³•2ï¼šæŒ‡å®šå…·ä½“æ¨¡å‹

#### ä½¿ç”¨best_modelï¼ˆæ¨èï¼‰
```bash
python AlgorithmServer.py --use-learned-weights --model-path DQN_Weight/models/best_model
```

#### ä½¿ç”¨æœ€ç»ˆæ¨¡å‹
```bash
python AlgorithmServer.py --use-learned-weights --model-path DQN_Weight/models/weight_predictor_airsim
```

#### ä½¿ç”¨ç‰¹å®šæ£€æŸ¥ç‚¹
```bash
python AlgorithmServer.py --use-learned-weights --model-path DQN_Weight/models/checkpoint_5000
```

#### ä½¿ç”¨ç»å¯¹è·¯å¾„
```bash
python AlgorithmServer.py --use-learned-weights --model-path D:/Project/AirsimProject/AirsimAlgorithmPython/multirotor/DQN_Weight/models/best_model
```

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### å¤šæ— äººæœº + DQN
```bash
python AlgorithmServer.py --use-learned-weights --drones 3
```

### ç¦ç”¨å¯è§†åŒ–ï¼ˆæå‡æ€§èƒ½ï¼‰
```bash
python AlgorithmServer.py --use-learned-weights --no-visualization
```

### æŸ¥çœ‹æ‰€æœ‰å‚æ•°
```bash
python AlgorithmServer.py --help
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå¯è§†åŒ–çª—å£æ²¡æœ‰å¼¹å‡º

**å¯èƒ½åŸå› **ï¼š
- pygameæœªå®‰è£…
- SimpleVisualizerå¯¼å…¥å¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
```bash
pip install pygame
```

æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰ä»¥ä¸‹æç¤ºï¼š
```
ğŸ¨ åˆå§‹åŒ–å¯è§†åŒ–ç»„ä»¶...
âœ… å¯è§†åŒ–ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ
ğŸ¨ å¯åŠ¨å¯è§†åŒ–çº¿ç¨‹...
âœ… å¯è§†åŒ–çº¿ç¨‹å·²å¯åŠ¨
ğŸ’¡ å¯è§†åŒ–çª—å£åº”è¯¥ä¼šå¼¹å‡º
```

### é—®é¢˜2ï¼šæ‰¾ä¸åˆ°æ¨¡å‹æ–‡ä»¶

**ç—‡çŠ¶**ï¼š
```
âŒ æœªæ‰¾åˆ°ä»»ä½•å¯ç”¨çš„æ¨¡å‹æ–‡ä»¶
å°†ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„å›ºå®šæƒé‡
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
dir DQN_Weight\models\*.zip    # Windows
ls DQN_Weight/models/*.zip     # Linux/Mac
```

2. ç¡®ä¿è‡³å°‘æœ‰ä»¥ä¸‹æ–‡ä»¶ä¹‹ä¸€ï¼š
   - `best_model.zip`
   - `weight_predictor_airsim.zip`
   - `weight_predictor_simple.zip`

3. å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦å…ˆè®­ç»ƒæ¨¡å‹ï¼š
```bash
cd DQN_Weight
python train_with_airsim_improved.py
```

### é—®é¢˜3ï¼šæ¨¡å‹åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
âŒ æƒé‡é¢„æµ‹å™¨åˆå§‹åŒ–å¤±è´¥
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥stable-baselines3æ˜¯å¦å®‰è£…ï¼š
```bash
pip install stable-baselines3
```

2. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦æŸåï¼ˆé‡æ–°è®­ç»ƒï¼‰

---

## ğŸ“Š æ¨¡å‹æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼ | æƒé‡æ¥æº | é€‚åº”æ€§ | æ€§èƒ½ |
|------|---------|--------|------|
| å›ºå®šæƒé‡ | é…ç½®æ–‡ä»¶ | âŒ é™æ€ | â­â­â­ |
| DQNæƒé‡ | AIé¢„æµ‹ | âœ… åŠ¨æ€è‡ªé€‚åº” | â­â­â­â­â­ |

---

## ğŸ¯ æœ€ä½³å®è·µ

1. **è®­ç»ƒé˜¶æ®µ**ï¼š
   - ä½¿ç”¨è¶³å¤Ÿçš„è®­ç»ƒæ­¥æ•°ï¼ˆå»ºè®®5000+ï¼‰
   - å¯ç”¨å¯è§†åŒ–ç›‘æ§è®­ç»ƒè¿‡ç¨‹
   - å®šæœŸä¿å­˜æ£€æŸ¥ç‚¹

2. **ä½¿ç”¨é˜¶æ®µ**ï¼š
   - ä¼˜å…ˆä½¿ç”¨ `best_model.zip`
   - å®æ—¶ç¯å¢ƒå¯ç¦ç”¨å¯è§†åŒ–æå‡æ€§èƒ½
   - å¤šæ— äººæœºåœºæ™¯å»ºè®®ä½¿ç”¨DQNæƒé‡

3. **è°ƒè¯•é˜¶æ®µ**ï¼š
   - å¯ç”¨å¯è§†åŒ–è§‚å¯Ÿè¡Œä¸º
   - å¯¹æ¯”å›ºå®šæƒé‡å’ŒDQNæƒé‡çš„æ•ˆæœ
   - ä½¿ç”¨ä¸åŒæ£€æŸ¥ç‚¹æµ‹è¯•è®­ç»ƒç¨³å®šæ€§

---

## ğŸ“ ç¤ºä¾‹å‘½ä»¤æ±‡æ€»

```bash
# 1. è®­ç»ƒæ–°æ¨¡å‹
cd AirsimAlgorithmPython/multirotor/DQN_Weight
python train_with_airsim_improved.py

# 2. ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰
cd ..
python AlgorithmServer.py --use-learned-weights

# 3. ä½¿ç”¨best_modelï¼ˆæ¨èï¼‰
python AlgorithmServer.py --use-learned-weights --model-path DQN_Weight/models/best_model

# 4. å¤šæ— äººæœº + DQN
python AlgorithmServer.py --use-learned-weights --drones 3

# 5. å¯¹æ¯”æ¨¡å¼ï¼ˆå›ºå®šæƒé‡ vs DQNï¼‰
python AlgorithmServer.py                              # å›ºå®šæƒé‡
python AlgorithmServer.py --use-learned-weights        # DQNæƒé‡

# 6. æŸ¥çœ‹å¸®åŠ©
python AlgorithmServer.py --help
```

